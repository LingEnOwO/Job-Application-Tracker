(function(){"use strict";function m(){return window.location.hostname.includes("greenhouse.io")||document.querySelector(".app-title")!==null||document.querySelector("#application_form")!==null}function l(){const t={};try{const o=document.querySelector('script[type="application/ld+json"]');if(o){const e=JSON.parse(o.textContent);e.hiringOrganization&&e.hiringOrganization.name&&(t.company=e.hiringOrganization.name)}}catch{}if(!t.company){const o=document.querySelector('meta[property="og:site_name"]');o&&(t.company=o.content)}if(!t.company&&document.title){const o=document.title.match(/\bat\s+(.+)$/);o&&(t.company=o[1].trim())}if(!t.company){const o=document.querySelector(".company-name, .header-company-name");o&&(t.company=o.textContent.trim())}const c=document.querySelector('.app-title, h1.app-title, [data-qa="job-title"]');c&&(t.position=c.textContent.trim());const n=document.querySelector(".location, .app-location");n&&(t.location=n.textContent.trim());const i=document.querySelector("#content, .content, .job-description");i&&(t.jobDescription=i.textContent.trim());const a=window.location.pathname.match(/\/jobs\/(\d+)/);return a&&(t.jobId=a[1]),t}function p(){return window.location.hostname.includes("lever.co")||document.querySelector('[data-qa="posting-name"]')!==null||document.querySelector(".posting")!==null}function d(){const t={};try{const o=document.querySelector('script[type="application/ld+json"]');if(o){const e=JSON.parse(o.textContent);e.hiringOrganization&&e.hiringOrganization.name&&(t.company=e.hiringOrganization.name)}}catch{}if(!t.company){const o=document.querySelector('meta[property="og:site_name"]');o&&(t.company=o.content)}if(!t.company&&document.title){const o=document.title.match(/\bat\s+(.+)$/);o&&(t.company=o[1].trim())}if(!t.company){const o=document.querySelector(".main-header-text-logo, .company-name");o&&(t.company=o.textContent.trim())}const c=document.querySelector('[data-qa="posting-name"], .posting-headline h2');c&&(t.position=c.textContent.trim());const n=document.querySelector('.posting-categories .location, [data-qa="posting-location"]');n&&(t.location=n.textContent.trim());const i=document.querySelector(".section-wrapper, .posting-description");i&&(t.jobDescription=i.textContent.trim());const a=window.location.pathname.match(/\/([a-f0-9-]+)$/);return a&&(t.jobId=a[1]),t}function u(){return window.location.hostname.includes("ashbyhq.com")||document.querySelector('[data-testid="job-title"]')!==null||document.querySelector(".ashby-job-posting")!==null}function y(){const t={};try{const o=document.querySelector('script[type="application/ld+json"]');if(o){const e=JSON.parse(o.textContent);e.hiringOrganization&&e.hiringOrganization.name&&(t.company=e.hiringOrganization.name)}}catch{}if(!t.company&&window.location.hostname==="jobs.ashbyhq.com"){const e=window.location.pathname.match(/^\/([^\/]+)/);e&&(t.company=e[1].split("-").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" "))}const c=document.querySelector('[data-testid="job-title"], h1');c&&(t.position=c.textContent.trim());const n=document.querySelector('[data-testid="job-location"]');n&&(t.location=n.textContent.trim());const i=document.querySelector('[data-testid="job-description"], .job-description');i&&(t.jobDescription=i.textContent.trim());const a=window.location.pathname.match(/\/([a-f0-9-]+)$/);return a&&(t.jobId=a[1]),t}function f(){return window.location.hostname.includes("myworkdayjobs.com")||document.querySelector('[data-automation-id="jobPostingHeader"]')!==null||document.querySelector(".jobProperty")!==null}function h(){const t={},n=window.location.hostname.match(/^([^.]+)\./);if(n&&(t.company=n[1].charAt(0).toUpperCase()+n[1].slice(1)),!t.company)try{const r=document.querySelector('script[type="application/ld+json"]');if(r){const s=JSON.parse(r.textContent);s.hiringOrganization&&s.hiringOrganization.name&&(t.company=s.hiringOrganization.name)}}catch{}const i=document.querySelector('h2[data-automation-id="jobPostingHeader"], .jobPostingHeader h2');i&&(t.position=i.textContent.trim());const a=document.querySelector('[data-automation-id="locations"], .jobProperty.location');a&&(t.location=a.textContent.trim());const o=document.querySelector('[data-automation-id="jobPostingDescription"], .jobDescription');o&&(t.jobDescription=o.textContent.trim());const e=document.querySelector('[data-automation-id="requisitionId"]');return e&&(t.jobId=e.textContent.trim()),t}function g(){return window.location.href}function j(){const t={},c=document.querySelector('meta[property="og:title"]'),n=document.querySelector('meta[property="og:site_name"]'),i=document.querySelector('meta[property="og:description"]');if(c&&(t.position=c.content),n&&(t.company=n.content),i&&(t.jobDescription=i.content),!t.position){const o=document.querySelector('meta[name="twitter:title"]');o&&(t.position=o.content)}!t.position&&document.title&&(t.position=document.title);const a=document.querySelectorAll('script[type="application/ld+json"]');for(const o of a)try{const e=JSON.parse(o.textContent);if(e["@type"]==="JobPosting"){e.title&&(t.position=e.title),e.hiringOrganization?.name&&(t.company=e.hiringOrganization.name),e.description&&(t.jobDescription=e.description),e.jobLocation?.address?.addressLocality&&(t.location=e.jobLocation.address.addressLocality);break}}catch{}return t}function b(){return m()?"greenhouse":p()?"lever":u()?"ashby":f()?"workday":null}function S(t){switch(t){case"greenhouse":return l();case"lever":return d();case"ashby":return y();case"workday":return h();default:return{}}}function q(){const t={};if(document.title){const n=document.title.split(/[-|@]/);if(n.length>0){const i=n[0].trim();i.length>3&&(t.position=i)}}if(!t.position){const n=document.querySelector("h1");n&&(t.position=n.textContent.trim())}try{const n=document.querySelector('script[type="application/ld+json"]');if(n){const i=JSON.parse(n.textContent);i.hiringOrganization&&i.hiringOrganization.name&&(t.company=i.hiringOrganization.name)}}catch{}if(!t.company){const n=document.querySelector('meta[property="og:site_name"]');n&&(t.company=n.content)}if(!t.company&&document.title){const n=document.title.match(/\bat\s+(.+)$/);n&&(t.company=n[1].trim())}if(!t.company){const n=[".company-name",".employer-name",'[itemprop="hiringOrganization"]',".company"];for(const i of n){const a=document.querySelector(i);if(a){t.company=a.textContent.trim();break}}}const c=document.querySelector("main, article, .job-description, .description");return c&&(t.jobDescription=c.textContent.trim()),t}function x(){const t=new Date,c=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0"),a=`${c}-${n}-${i}`,o={jobUrl:g(),applyDate:a},e=j();Object.assign(o,e);const r=b();if(r){const s=S(r);Object.assign(o,s),o.atsDetected=r}else{const s=q();Object.assign(o,s)}return o.position&&(o.position=o.position.trim()),o.company&&(o.company=o.company.trim()),o.jobDescription&&(o.jobDescription=o.jobDescription.substring(0,1e4).trim()),o}chrome.runtime.onMessage.addListener((t,c,n)=>{if(t.action==="extract")try{const i=x();n({success:!0,data:i})}catch(i){n({success:!1,error:i.message})}return!0})})();
