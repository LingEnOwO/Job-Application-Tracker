(function(){"use strict";function l(){return window.location.hostname.includes("greenhouse.io")||document.querySelector(".app-title")!==null||document.querySelector("#application_form")!==null}function m(){const t={},a=document.querySelector('meta[property="og:site_name"]');if(a)t.company=a.content;else{const n=document.querySelector(".company-name, .header-company-name");n&&(t.company=n.textContent.trim())}const i=document.querySelector('.app-title, h1.app-title, [data-qa="job-title"]');i&&(t.position=i.textContent.trim());const e=document.querySelector(".location, .app-location");e&&(t.location=e.textContent.trim());const c=document.querySelector("#content, .content, .job-description");c&&(t.jobDescription=c.textContent.trim());const o=window.location.pathname.match(/\/jobs\/(\d+)/);return o&&(t.jobId=o[1]),t}function d(){return window.location.hostname.includes("lever.co")||document.querySelector('[data-qa="posting-name"]')!==null||document.querySelector(".posting")!==null}function u(){const t={},a=document.querySelector('meta[property="og:site_name"]');if(a)t.company=a.content;else{const n=document.querySelector(".main-header-text-logo, .company-name");n&&(t.company=n.textContent.trim())}const i=document.querySelector('[data-qa="posting-name"], .posting-headline h2');i&&(t.position=i.textContent.trim());const e=document.querySelector('.posting-categories .location, [data-qa="posting-location"]');e&&(t.location=e.textContent.trim());const c=document.querySelector(".section-wrapper, .posting-description");c&&(t.jobDescription=c.textContent.trim());const o=window.location.pathname.match(/\/([a-f0-9-]+)$/);return o&&(t.jobId=o[1]),t}function p(){return window.location.hostname.includes("ashbyhq.com")||document.querySelector('[data-testid="job-title"]')!==null||document.querySelector(".ashby-job-posting")!==null}function y(){const t={};try{const o=document.querySelector('script[type="application/ld+json"]');if(o){const n=JSON.parse(o.textContent);n.hiringOrganization&&n.hiringOrganization.name&&(t.company=n.hiringOrganization.name)}}catch{}if(!t.company&&window.location.hostname==="jobs.ashbyhq.com"){const n=window.location.pathname.match(/^\/([^\/]+)/);n&&(t.company=n[1].split("-").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" "))}const a=document.querySelector('[data-testid="job-title"], h1');a&&(t.position=a.textContent.trim());const i=document.querySelector('[data-testid="job-location"]');i&&(t.location=i.textContent.trim());const e=document.querySelector('[data-testid="job-description"], .job-description');e&&(t.jobDescription=e.textContent.trim());const c=window.location.pathname.match(/\/([a-f0-9-]+)$/);return c&&(t.jobId=c[1]),t}function f(){return window.location.hostname.includes("myworkdayjobs.com")||document.querySelector('[data-automation-id="jobPostingHeader"]')!==null||document.querySelector(".jobProperty")!==null}function h(){const t={},i=window.location.hostname.match(/([^.]+)\.myworkdayjobs\.com/);i&&(t.company=i[1].charAt(0).toUpperCase()+i[1].slice(1));const e=document.querySelector('h2[data-automation-id="jobPostingHeader"], .jobPostingHeader h2');e&&(t.position=e.textContent.trim());const c=document.querySelector('[data-automation-id="locations"], .jobProperty.location');c&&(t.location=c.textContent.trim());const o=document.querySelector('[data-automation-id="jobPostingDescription"], .jobDescription');o&&(t.jobDescription=o.textContent.trim());const n=document.querySelector('[data-automation-id="requisitionId"]');return n&&(t.jobId=n.textContent.trim()),t}function b(){return window.location.href}function j(){const t={},a=document.querySelector('meta[property="og:title"]'),i=document.querySelector('meta[property="og:site_name"]'),e=document.querySelector('meta[property="og:description"]');if(a&&(t.position=a.content),i&&(t.company=i.content),e&&(t.jobDescription=e.content),!t.position){const o=document.querySelector('meta[name="twitter:title"]');o&&(t.position=o.content)}!t.position&&document.title&&(t.position=document.title);const c=document.querySelectorAll('script[type="application/ld+json"]');for(const o of c)try{const n=JSON.parse(o.textContent);if(n["@type"]==="JobPosting"){n.title&&(t.position=n.title),n.hiringOrganization?.name&&(t.company=n.hiringOrganization.name),n.description&&(t.jobDescription=n.description),n.jobLocation?.address?.addressLocality&&(t.location=n.jobLocation.address.addressLocality);break}}catch{}return t}function g(){return l()?"greenhouse":d()?"lever":p()?"ashby":f()?"workday":null}function S(t){switch(t){case"greenhouse":return m();case"lever":return u();case"ashby":return y();case"workday":return h();default:return{}}}function q(){const t={};if(document.title){const e=document.title.split(/[-|@]/);if(e.length>0){const c=e[0].trim();c.length>3&&(t.position=c)}}if(!t.position){const e=document.querySelector("h1");e&&(t.position=e.textContent.trim())}const a=[".company-name",".employer-name",'[itemprop="hiringOrganization"]',".company"];for(const e of a){const c=document.querySelector(e);if(c){t.company=c.textContent.trim();break}}const i=document.querySelector("main, article, .job-description, .description");return i&&(t.jobDescription=i.textContent.trim()),t}function x(){const t=new Date,a=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0"),e=String(t.getDate()).padStart(2,"0"),c=`${a}-${i}-${e}`,o={jobUrl:b(),applyDate:c},n=j();Object.assign(o,n);const r=g();if(r){const s=S(r);Object.assign(o,s),o.atsDetected=r}else{const s=q();Object.assign(o,s)}return o.position&&(o.position=o.position.trim()),o.company&&(o.company=o.company.trim()),o.jobDescription&&(o.jobDescription=o.jobDescription.substring(0,1e4).trim()),o}chrome.runtime.onMessage.addListener((t,a,i)=>{if(t.action==="extract")try{const e=x();i({success:!0,data:e})}catch(e){i({success:!1,error:e.message})}return!0})})();
