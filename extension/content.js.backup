(function(){"use strict";function s(){return window.location.hostname.includes("greenhouse.io")||document.querySelector(".app-title")!==null||document.querySelector("#application_form")!==null}function m(){const t={},c=document.querySelector('meta[property="og:site_name"]');if(c)t.company=c.content;else{const o=document.querySelector(".company-name, .header-company-name");o&&(t.company=o.textContent.trim())}const n=document.querySelector('.app-title, h1.app-title, [data-qa="job-title"]');n&&(t.position=n.textContent.trim());const e=document.querySelector(".location, .app-location");e&&(t.location=e.textContent.trim());const a=document.querySelector("#content, .content, .job-description");a&&(t.jobDescription=a.textContent.trim());const i=window.location.pathname.match(/\/jobs\/(\d+)/);return i&&(t.jobId=i[1]),t}function l(){return window.location.hostname.includes("lever.co")||document.querySelector('[data-qa="posting-name"]')!==null||document.querySelector(".posting")!==null}function u(){const t={},c=document.querySelector('meta[property="og:site_name"]');if(c)t.company=c.content;else{const o=document.querySelector(".main-header-text-logo, .company-name");o&&(t.company=o.textContent.trim())}const n=document.querySelector('[data-qa="posting-name"], .posting-headline h2');n&&(t.position=n.textContent.trim());const e=document.querySelector('.posting-categories .location, [data-qa="posting-location"]');e&&(t.location=e.textContent.trim());const a=document.querySelector(".section-wrapper, .posting-description");a&&(t.jobDescription=a.textContent.trim());const i=window.location.pathname.match(/\/([a-f0-9-]+)$/);return i&&(t.jobId=i[1]),t}function d(){return window.location.hostname.includes("ashbyhq.com")||document.querySelector('[data-testid="job-title"]')!==null||document.querySelector(".ashby-job-posting")!==null}function p(){const t={};try{const i=document.querySelector('script[type="application/ld+json"]');if(i){const o=JSON.parse(i.textContent);o.hiringOrganization&&o.hiringOrganization.name&&(t.company=o.hiringOrganization.name)}}catch{}if(!t.company&&window.location.hostname==="jobs.ashbyhq.com"){const o=window.location.pathname.match(/^\/([^\/]+)/);o&&(t.company=o[1].split("-").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" "))}companyName&&(t.company=companyName);const c=document.querySelector('[data-testid="job-title"], h1');c&&(t.position=c.textContent.trim());const n=document.querySelector('[data-testid="job-location"]');n&&(t.location=n.textContent.trim());const e=document.querySelector('[data-testid="job-description"], .job-description');e&&(t.jobDescription=e.textContent.trim());const a=window.location.pathname.match(/\/([a-f0-9-]+)$/);return a&&(t.jobId=a[1]),t}function y(){return window.location.hostname.includes("myworkdayjobs.com")||document.querySelector('[data-automation-id="jobPostingHeader"]')!==null||document.querySelector(".jobProperty")!==null}function f(){const t={},n=window.location.hostname.match(/([^.]+)\.myworkdayjobs\.com/);n&&(t.company=n[1].charAt(0).toUpperCase()+n[1].slice(1));const e=document.querySelector('h2[data-automation-id="jobPostingHeader"], .jobPostingHeader h2');e&&(t.position=e.textContent.trim());const a=document.querySelector('[data-automation-id="locations"], .jobProperty.location');a&&(t.location=a.textContent.trim());const i=document.querySelector('[data-automation-id="jobPostingDescription"], .jobDescription');i&&(t.jobDescription=i.textContent.trim());const o=document.querySelector('[data-automation-id="requisitionId"]');return o&&(t.jobId=o.textContent.trim()),t}function h(){return window.location.href}function b(){const t={},c=document.querySelector('meta[property="og:title"]'),n=document.querySelector('meta[property="og:site_name"]'),e=document.querySelector('meta[property="og:description"]');if(c&&(t.position=c.content),n&&(t.company=n.content),e&&(t.jobDescription=e.content),!t.position){const i=document.querySelector('meta[name="twitter:title"]');i&&(t.position=i.content)}!t.position&&document.title&&(t.position=document.title);const a=document.querySelectorAll('script[type="application/ld+json"]');for(const i of a)try{const o=JSON.parse(i.textContent);if(o["@type"]==="JobPosting"){o.title&&(t.position=o.title),o.hiringOrganization?.name&&(t.company=o.hiringOrganization.name),o.description&&(t.jobDescription=o.description),o.jobLocation?.address?.addressLocality&&(t.location=o.jobLocation.address.addressLocality);break}}catch{}return t}function j(){return s()?"greenhouse":l()?"lever":d()?"ashby":y()?"workday":null}function g(t){switch(t){case"greenhouse":return m();case"lever":return u();case"ashby":return p();case"workday":return f();default:return{}}}function S(){const t={},c=document.querySelector("h1");c&&(t.position=c.textContent.trim());const n=[".company-name",".employer-name",'[itemprop="hiringOrganization"]',".company"];for(const a of n){const i=document.querySelector(a);if(i){t.company=i.textContent.trim();break}}const e=document.querySelector("main, article, .job-description, .description");return e&&(t.jobDescription=e.textContent.trim()),t}function q(){const t={jobUrl:h(),applyDate:new Date().toISOString().split("T")[0]},c=b();Object.assign(t,c);const n=j();if(n){const e=g(n);Object.assign(t,e),t.atsDetected=n}else{const e=S();Object.assign(t,e)}return t.position&&(t.position=t.position.trim()),t.company&&(t.company=t.company.trim()),t.jobDescription&&(t.jobDescription=t.jobDescription.substring(0,1e4).trim()),t}chrome.runtime.onMessage.addListener((t,c,n)=>{if(t.action==="extract")try{const e=q();n({success:!0,data:e})}catch(e){n({success:!1,error:e.message})}return!0})})();
